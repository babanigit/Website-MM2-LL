<h3 style="margin-left: 120px">
  IPO Snapshot >
  {{ iPO_TYPE.charAt(0).toUpperCase() + iPO_TYPE.slice(1).toLowerCase() }} IPOs
</h3>

<div
  style="
    margin-left: 120px;
    display: flex;
    border-collapse: collapse;
    width: 50%;
  "
>
  <button
    (click)="onHandleClick('upcoming')"
    [ngStyle]="{
      'background-color': iPO_TYPE === 'upcoming' ? 'blue' : 'transparent',
      color: iPO_TYPE === 'upcoming' ? 'white' : 'black'
    }"
    style="
      border: 1px solid blue;
      padding: 8px;
      text-align: center;
      flex: 1;
      cursor: pointer;
    "
  >
    Upcoming
  </button>
  <button
    (click)="onHandleClick('open')"
    [ngStyle]="{
      'background-color': iPO_TYPE === 'open' ? 'blue' : 'transparent',
      color: iPO_TYPE === 'open' ? 'white' : 'black'
    }"
    style="
      border: 1px solid blue;
      padding: 8px;
      text-align: center;
      flex: 1;
      cursor: pointer;
    "
  >
    Open
  </button>
  <button
    (click)="onHandleClick('closed')"
    [ngStyle]="{
      'background-color': iPO_TYPE === 'closed' ? 'blue' : 'transparent',
      color: iPO_TYPE === 'closed' ? 'white' : 'black'
    }"
    style="
      border: 1px solid blue;
      padding: 8px;
      text-align: center;
      flex: 1;
      cursor: pointer;
    "
  >
    Closed
  </button>
  <button
    (click)="onHandleClick('listed')"
    [ngStyle]="{
      'background-color': iPO_TYPE === 'listed' ? 'blue' : 'transparent',
      color: iPO_TYPE === 'listed' ? 'white' : 'black'
    }"
    style="
      border: 1px solid blue;
      padding: 8px;
      text-align: center;
      flex: 1;
      cursor: pointer;
    "
  >
    Listed
  </button>
</div>

<br />

<div class="container" style="padding: 20px" *ngIf="ipoList[0]?.data">
  <!-- upcoming -->
  <div
    *ngIf="iPO_TYPE === 'upcoming' && ipoList.length"
    style="display: flex; gap: 5%"
  >
    <div
      class="ipo-item"
      style="
        display: grid;
        height: 320px;
        width: 290px;
        grid-template-rows: 50% 50%;
        border: 2px solid gainsboro;
        padding: 2%;
      "
      *ngFor="let hello of ipoList[0].data.upcoming"
    >
      <!-- {{ hello.sname }} -->

      <div>
        <div style="height: 30px; font-size: small; padding-left: 2%">
          INDUSTRY : <strong> {{ hello.industry }} </strong>
        </div>

        <div
          style="
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 4%;
            padding-left: 4%;
            height: fit-content;
          "
        >
          <span style="text-align: center">
            <img
              src="https://i.marketsmojo.com/{{ hello.stock_logo }}"
              style="width: 50px"
              alt=""
            />
          </span>
          <span style="text-align: left; font-weight: 500">
            {{ hello.sname }}
          </span>
        </div>
        <div
          style="width: 100%; text-align: center; font-weight: 400; color: gray"
        >
          {{ iPO_TYPE }} IPO
        </div>
      </div>

      <div style="display: flex; justify-content: center; align-items: center">
        <table style="font-size: small">
          <tbody>
            <tr style="display: flex; gap: 5%">
              <td>Price Band</td>
              <td>
                <strong> {{ hello.price_band }} </strong>
              </td>
            </tr>
            <tr style="display: flex; gap: 5%">
              <td>Issue open date</td>
              <td>{{ hello.start_date }}</td>
            </tr>
            <tr style="display: flex; gap: 5%">
              <td>Issue close date</td>
              <td>{{ hello.close_date }}</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <!-- open -->
  <div
    *ngIf="iPO_TYPE === 'open' && ipoList.length"
    style="display: flex; gap: 5%"
  >
    <div
      class="ipo-item"
      style="
        display: grid;
        height: 320px;
        width: 290px;
        grid-template-rows: 50% 50%;
        border: 2px solid gainsboro;
        padding: 2%;
      "
      *ngFor="let hello of ipoList[0].data.open"
    >
      <div>
        <div style="height: 30px; font-size: small; padding-left: 2%">
          INDUSTRY : <strong> {{ hello.industry }} </strong>
        </div>

        <div
          style="
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 4%;
            padding-left: 4%;
            height: fit-content;
          "
        >
          <span style="text-align: center">
            <img
              src="https://i.marketsmojo.com/{{ hello.stock_logo }}"
              style="width: 50px"
              alt=""
            />
          </span>
          <span style="text-align: left; font-weight: 500">
            {{ hello.sname }}
          </span>
        </div>
        <div
          style="width: 100%; text-align: center; font-weight: 400; color: gray"
        >
          {{ iPO_TYPE }} IPO
        </div>
      </div>

      <div style="display: flex; justify-content: center; align-items: center">
        <table style="font-size: small">
          <tbody>
            <tr style="display: flex; gap: 5%">
              <td>Price Band</td>
              <td>
                <strong> {{ hello.price_band }} </strong>
              </td>
            </tr>
            <tr style="display: flex; gap: 5%">
              <td>Issue open date</td>
              <td>{{ hello.start_date }}</td>
            </tr>
            <tr style="display: flex; gap: 5%">
              <td>Issue close date</td>
              <td>{{ hello.close_date }}</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <!-- closed -->
  <div *ngIf="iPO_TYPE === 'closed' && ipoList.length">
    <!-- <div *ngFor="let hello of ipoList[0].data.closed">
      {{ hello.sname }}
    </div> -->

    <div>
      <table style="width: 100%; border-collapse: collapse">
        <thead>
          <tr style="height: 50px; text-align: center">
            <th style="width: 250px; text-align: left">
              <div>Company</div>
              <div style="color: gray; font-size: smaller">Industry</div>
            </th>
            <th>IPO Analysis</th>
            <th>Price Band</th>
            <th>Issue open date</th>
            <th>Issue close date</th>
            <th>Listing date</th>
          </tr>
        </thead>
        <br /><br />
        <tbody *ngFor="let hello of ipoList[0].data.closed">
          <tr
            style="
              height: 50px;
              border-bottom: 1px solid gainsboro;
              text-align: center;
            "
          >
            <td style="text-align: left">
              <div style="color: blue">
                {{ hello.sname }}
              </div>
              <div style="font-weight: 400; color: grey; font-size: small">
                {{ hello.industry }}
              </div>
            </td>
            <td>
              <div
                [ngStyle]="{ color: getStatusColor(hello.mojocall.sub_status) }"
              >
                {{ hello.mojocall.sub_status }}
              </div>
            </td>
            <td>
              <!-- price band -->
              {{ hello.price_band }}
            </td>
            <td>
              <!-- Issue open date -->
              {{ hello?.issue_details?.['Issue Opens'] || 'N/A' }}
            </td>
            <td>
              <div>
                <!-- Issue close date -->
                {{ hello?.issue_details?.['Issue Closes'] || 'N/A' }}
              </div>
            </td>
            <td>
              <!-- Listing date -->
              {{ hello.listing_date }}
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <!-- listed -->
  <div *ngIf="iPO_TYPE === 'listed' && ipoList.length">
    <div>
      <table style="width: 100%; border-collapse: collapse">
        <thead>
          <tr style="height: 50px; text-align: center">
            <th style="width: 250px; text-align: left">
              <div>Company</div>
              <div style="color: gray; font-size: smaller">Industry</div>
            </th>
            <th>
              <div>IPO Analysis</div>
              <div style="color: gray; font-size: smaller">
                IPO closing date
              </div>
            </th>
            <th>Issue Price</th>
            <th>
              <div>Listing Price</div>
              <div style="color: gray; font-size: smaller">%Listing Gain*</div>
            </th>
            <th>
              <div>Latest Price</div>
              <div style="color: gray; font-size: smaller">%Change</div>
            </th>
            <th style="width: 150px">%Change from Issue Price</th>
            <th style="width: 150px">%Change from Listing price</th>
          </tr>
        </thead>
        <br /><br />
        <tbody *ngFor="let hello of ipoList[0].data.listed">
          <tr
            style="
              height: 50px;
              border-bottom: 1px solid gainsboro;
              text-align: center;
            "
          >
            <td style="text-align: left">
              <div style="color: blue">
                {{ hello.sname }}
              </div>
              <div style="font-weight: 400; color: grey; font-size: small">
                {{ hello.industry }}
              </div>
            </td>
            <td>
              <div
                [ngStyle]="{ color: getStatusColor(hello.mojocall.sub_status) }"
              >
                {{ hello.mojocall.sub_status }}
              </div>
              <div style="font-weight: 400; font-size: small">
                {{ hello.close_date }}
              </div>
            </td>
            <td>{{ hello.issue_price }}.00</td>
            <td>
              <div>
                {{ hello.listed_price }}
              </div>
              <div
                [ngStyle]="{ color: getListedGlColor(hello.listedgl) }"
                style="font-weight: 400; font-size: small"
              >
                ({{ hello.listedgl }})
              </div>
            </td>
            <td>
              <div>{{ hello.cmp }}</div>
              <div
                [ngStyle]="{ color: getListedGlColor(hello.dgain_perc) }"
                style="font-weight: 400; font-size: small"
              >
                {{ hello.dgain_perc }}
              </div>
            </td>
            <td
              style="
                background-color: lightgreen;
                border-right: 1px solid gainsboro;
              "
              [ngStyle]="{
                color: getListedGlColor(hello.perc_chng_issue_price)
              }"
            >
              {{ hello.perc_chng_issue_price }}
            </td>
            <td
              style="background-color: lightgreen"
              [ngStyle]="{
                color: getListedGlColor(hello.perc_chng_listing_price)
              }"
            >
              {{ hello.listed_price }}
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
